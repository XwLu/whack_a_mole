# Arduino打地鼠游戏

基于Arduino UNO开发的经典打地鼠游戏，根据guide.md的需求实现。

## 功能特点

- 🎮 经典打地鼠游戏体验
- 🔢 两位数码管显示实时得分
- ⏱️ 60秒游戏时长
- 🔄 自动刷新地鼠位置（3秒超时或被击中后）
- 🔁 复位按钮重新开始游戏

## 硬件需求

### 核心组件
- Arduino UNO 开发板 × 1
- 两位共阴极数码管 × 1
- 带LED的自动复位按钮 × 5
- 220Ω电阻 × 7（5个LED限流 + 2个数码管位选限流）
- 面包板 × 1
- 杜邦线若干

**注意**：不再需要独立的复位按钮，通过同时按下3个地鼠按钮进行游戏重置。

## 硬件连接图

### IIC数码管连接

| 数码管引脚 | Arduino引脚 | 功能说明 |
|------------|-------------|----------|
| VCC        | 5V          | 电源正极 |
| GND        | GND         | 电源负极 |
| SDA        | A4          | IIC数据引脚 |
| SCL        | A5          | IIC时钟引脚 |

**注意：** IIC数码管通常使用标准的IIC接口，只需4根线连接即可。

### 地鼠按钮和LED连接

#### LED控制引脚（输出）
| 组件 | Arduino引脚 | 说明 |
|------|-------------|------|
| 地鼠1 LED | 12 | 串联220Ω电阻 |
| 地鼠2 LED | A0 | 串联220Ω电阻 |
| 地鼠3 LED | A1 | 串联220Ω电阻 |
| 地鼠4 LED | A2 | 串联220Ω电阻 |
| 地鼠5 LED | 2 | 串联220Ω电阻（使用原数码管引脚） |

#### 按钮引脚（输入）
| 组件 | Arduino引脚 | 说明 |
|------|-------------|------|
| 地鼠1按钮 | 13 | 上拉输入 |
| 地鼠2按钮 | A3 | 上拉输入 |
| 地鼠3按钮 | 4 | 上拉输入（使用原数码管C引脚） |
| 地鼠4按钮 | 5 | 上拉输入（使用原数码管D引脚） |
| 地鼠5按钮 | 3 | 上拉输入（使用原数码管B引脚） |

**复位功能**：同时按下任意3个或更多地鼠按钮即可重置游戏

**引脚说明**：所有按钮引脚均避免了与IIC数码管的SDA(A4)和SCL(A5)引脚冲突，充分利用了原来数码管占用的引脚资源。

**连接说明：**
- LED：正极串联220Ω电阻后连接Arduino LED引脚，负极接地
- 按钮：一端连接Arduino按钮引脚，另一端接地（代码已启用内部上拉电阻）
- 复位按钮：一端连接Arduino引脚0，另一端接地

## 软件实现

### 主要功能模块

1. **数码管驱动**：实现两位数码管的动态显示
2. **按钮控制**：检测地鼠按钮和复位按钮的状态
3. **游戏逻辑**：
   - 随机显示地鼠（LED亮起）
   - 检测玩家击中地鼠
   - 计分系统
   - 60秒倒计时
   - 游戏结束判定

### 核心参数配置

```c
const int MAX_MOLES = 8;              // 最大地鼠数量
const int GAME_DURATION = 60000;       // 游戏持续时间（毫秒）
const int MOLE_DISPLAY_TIME = 3000;    // 地鼠显示时间（毫秒）
```

可以根据实际硬件情况调整这些参数。

## 使用方法

1. **硬件搭建**：按照上述连接图搭建电路
2. **代码上传**：将`whack_a_mole.ino`上传到Arduino UNO
3. **游戏开始**：
   - 上传完成后，数码管显示"00"
   - 按下**任意一个地鼠按钮**开始游戏
4. **游戏进行**：
   - 随机一个地鼠的LED亮起
   - 在3秒内按下对应的按钮得分+1
   - 未击中或超时后自动切换到下一个地鼠
5. **游戏结束**：
   - 60秒后游戏结束
   - 数码管显示最终得分
6. **重新开始**：
   - 同时按下**任意3个或更多地鼠按钮**重置游戏
   - 重置后，再次按下任意一个地鼠按钮开始新游戏

## 注意事项

1. **LED限流电阻**：必须为所有LED串联220Ω电阻，否则可能损坏LED或Arduino
2. **按钮数量**：可以根据实际硬件调整`MAX_MOLES`常量
3. **数码管类型**：代码默认使用共阴极数码管，如果使用共阳极数码管需要修改`digitCodes`数组
4. **随机数生成**：使用模拟引脚A5作为随机源，确保该引脚未连接任何传感器
5. **消抖处理**：代码中已包含简单的按钮消抖处理

## 扩展功能建议

1. 添加蜂鸣器音效（击中时发出提示音）
2. 实现难度递增（随着分数增加，地鼠显示时间缩短）
3. 添加游戏开始倒计时
4. 使用LCD显示屏显示更多游戏信息
5. 实现最高分数记录功能

## 文件说明

- `whack_a_mole.ino`：Arduino主程序代码
- `guide.md`：项目需求文档
- `README.md`：项目说明文档

## 许可证

本项目为开源项目，可自由使用和修改。
